<!DOCTYPE html>
<html dir="ltr" lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="expires" content="Tue, 01 Jan 2020 12:12:12 GMT">
    <meta http-equiv="cache-control" content="must-revalidate, public" max-age=31557600/>
    <meta http-equiv="Pragma" content="public">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <meta name="author" content="Gleidson Teixeira, gleidsondeveloper@gmail.com"/>
    <meta name="robots" content="index, follow">
    <meta name="language" content="pt-br" />   

    <title>Desafio Quero Bolsas</title>

    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap">
    <!-- <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.css" media="all"/> -->
    <link rel="stylesheet" type="text/css" href="css/font-awesome.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="css/estilo.css" media="all">

</head>
<body class="cinza">
    <header class="branco">
        <div class="ajuda">
            <i class="fa fa-info-circle"></i>
            <span class="azul-p-text">Ajuda</span>
        </div>
        <div class="logo">
            <figure>
                <img src="img/logo-querobolsa.svg" alt="Logo-Quero-Bolsa">
            </figure>
        </div>
        <div class="conta">
            <i class="fa fa-user-circle-o"></i>
            <span class="azul-p-text">Conta</span>
        </div>
    </header>
    <div class="menu azul-p">
        <h5>
            <b class="branco-text">Minha conta</b>
            <span class="menu-btn branco-text">Menu <i class="fa fa-chevron-down branco-text"></i></span>
        </h5>
        <nav>
            <ul>
                <li>
                    <a href="#!">Pré-matrículas</a>
                </li>
                <li>
                    <a href="#!" class="active">Bolsas favoritas</a>
                </li>
            </ul>
        </nav>
    </div>
    <main>
        <div class="breadcrumb">
            <ul>
                <li>
                    <a href="#!"><i class="fa fa-chevron-left"></i> <b>Minha conta</b></a>
                </li>
            </ul>
        </div>
        <div class="conteudo">
            <h2>Bolsas favoritas</h2>
            <p>Adicione bolsas de cursos e faculdades do seu interesse e receba atualizações com as melhores ofertas disponíveis.</p>
        </div>
        <div class="semestres">
            <ul>
                <li><b>Todos os semestres</b></li>
                <li><b>2º semestre de 2019</b></li>
                <li><b>1º semestre de 2020</b></li>
            </ul>
        </div>
        <div class="bolsas">
            <div class="add-bolsa branco click">
                <i class="fa fa-plus azul-p-text"></i>
                <h6>Adicionar bolsa</h6>
                <p>Clique para adicionar bolsas de cursos do seu interesse</p>
            </div>
            <ul id="bolsas-selecionadas"></ul>
        </div>
        <div class="modal suave">
            <form>
                <i class="fa fa-times branco-text fechar"></i>
                <div class="clear"></div>
                <div class="branco box suave">
                    <h4>Adicionar bolsa</h4>
                    <p>Filtre e adicione  as bolsas de seu interesse.</p>
                    <h6>Selecione sua cidade</h6>
                    <select id="listaCidades"></select>
                    <h6>Selecione o curso de sua preferência</h6>
                    <select >
                        <option value="1">cidade 1</option>
                        <option value="1">cidade 2</option>
                        <option value="1">cidade 3</option>
                    </select>
                    <h6>Como você quer estudar</h6>
                    <div class="opcao">
                        <input type="checkbox" name="" id="">
                        Presencial
                    </div>
                    <div class="opcao">
                        <input type="checkbox" name="" id="">
                        A distância
                    </div>
                    <div class="clear"></div>
                    <h6>Até quanto você pode pagar?</h6>
                    <p class="valor-max">R$ 10.000</p>
                    <input type="range" max="10000">
                    <h6>Resultado: <span class="direita">Ordenar por</span></h6>
                    <div class="filtro">
                        <select>
                            <option value="1">Nome da Faculdade</option>
                        </select>
                    </div>
                    <ul id="resultados"></ul>
                    <button type="button" class="esquerda cancelar">Cancelar</button>
                    <button type="button" class="direita inactive confirmar" disabled>Adicionar bolsa(s)</button>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </main>
    <footer class="azul-p">
        <div class="contatos">
            <ul>
                <li class="azul-s">
                    <i class="fa fa-whatsapp"></i>
                    <a href="tel:+558508001232222">
                        <b>0800 123 2222</b>
                        <h6>Segunda a sexta de 8h às 22h</h6>
                    </a>
                </li>
                <li class="azul-s">
                    <i class="fa fa-comments"></i>
                    <b>Chat</b>
                </li>
                <li class="azul-s">
                    <i class="fa fa-envelope"></i>
                    <a href="mailto:contato@queroeducacao.com.br">
                        <b>Email</b>
                    </a>
                </li>
                <li class="azul-s">
                    <i class="fa fa-info"></i>
                    <b>Ajuda</b>
                </li>
            </ul>
        </div>
        <div class="rodape branco-text">Feito com <i class="fa fa-heart branco-text"></i> pela Quero Educação</div>
    </footer>
    
    <script src="js/jquery.js"></script>
    <script>
        $(".menu-btn").click(function(){
            $(".menu nav ul").slideToggle("fast");
        });
        $(".add-bolsa").click(function(){
            $(".modal").addClass("active");
        });
        $(".fechar, .cancelar").click(function(){
            $(".modal").removeClass("active");
        });
        $(document).on("click", "#resultados input", function(){
            var selecionados = 0;
            $("#resultados input").each(function(){
                if($(this).prop("checked")){
                    selecionados += 1;
                }
            });
            if(selecionados > 0){
                $(".modal form .confirmar").addClass("active");
                $(".modal form .confirmar").removeClass("inactive");
                $(".modal form .confirmar").prop("disabled", false);
            }else{
                $(".modal form .confirmar").addClass("inactive");
                $(".modal form .confirmar").removeClass("active");
                $(".modal form .confirmar").prop("disabled", true);
            }
        });
        $(document).on("click", "#bolsas-selecionadas li .excluir", function(){
            var id = $(this).attr("data-id");
            $('#bolsas-selecionadas li[data-id='+id+']').remove();
        });
        function listaCursos(){
            var link = "https://testapi.io/api/redealumni/scholarships";
            var listaDeCursos;
            var listaCidades = [];
            $.get(link, function (obj) {
                listaDeCursos = obj;
                if(obj.length == 0){
                    
                }else{
                    var resultados = document.getElementById('resultados');
                    $("#resultados").empty();
                    obj.forEach(function(o){
                        var item = document.createElement('li');
                            item.setAttribute("data-id", obj.indexOf(o));
                            listaCidades.push(o.campus.city);
                        var html =  '<div class="checkbox">'+
                                        '<input type="checkbox" data-id="'+obj.indexOf(o)+'">'+
                                    '</div>'+
                                    '<figure>'+
                                        '<img src="'+o.university.logo_url+'">'+
                                    '</figure>'+
                                    '<div class="infos">'+
                                        '<h6 class="curso-nome"><b class="azul-s-text">'+o.course.name+'</b></h6>'+
                                        '<h6 class="curso-tipo">'+o.course.level+'</h6>'+
                                        '<h6 class="curso-desconto">Bolsa de <b class="verde-text">'+Math.round(o.discount_percentage)+'%</b></h6>'+
                                        '<h6 class="curso-valor"><b class="verde-text">R$ '+Math.round(o.price_with_discount)+'/mês</b></h6>'+
                                    '</div>';
                        item.innerHTML = html;
                        resultados.appendChild(item);
                    });
                }
            });
            var cidadesUnicas = [];
            listaCidades.forEach(function(ci){
                console.log(1);
                // if(!cidadesUnicas.find(ci)){
                //     cidadesUnicas.push(ci);
                // }
            });
            //console.log(listaCidades);
            //console.log(cidadesUnicas);
            // cidadesUnicas.forEach(function(ci){
            //     var cidades = document.getElementById('listaCidades');
            //     var html = '<option>'+ci+'</option>';
            //     cidades.append(html);
            // });

            $(".modal form").submit(function(e){
                e.preventDefault();
            });
            $(".confirmar").click(function(){
                $(".modal").removeClass("active");
                var bolsasSelecionadas = document.getElementById('bolsas-selecionadas');
                $("#bolsas-selecionadas").empty();
                $("#resultados li").each(function(){
                    if($(this).find("input").prop("checked")){
                        var id = $(this).attr("data-id");
                        var nota;
                        var item = document.createElement('li');
                        
                        item.classList.add("branco");
                        item.setAttribute("data-id", id);
                        
                        if(listaDeCursos[id].university.score == 0){
                            nota = '<i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i>';
                        }else if(listaDeCursos[id].university.score < 1){
                            nota = '<i class="amarelo-p-text fa fa-star-half-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i>';
                        }else if(listaDeCursos[id].university.score == 1){
                            nota = '<i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i>';
                        }else if(listaDeCursos[id].university.score > 1 && listaDeCursos[id].university.score < 2){
                            nota = '<i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star-half-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i>';
                        }else if(listaDeCursos[id].university.score == 2){
                            nota = '<i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i>';
                        }else if(listaDeCursos[id].university.score > 2 && listaDeCursos[id].university.score < 3){
                            nota = '<i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star-half-o"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i>';
                        }else if(listaDeCursos[id].university.score == 3){
                            nota = '<i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star-o"></i><i class="amarelo-p-text fa fa-star-o"></i>';
                        }else if(listaDeCursos[id].university.score > 3 && listaDeCursos[id].university.score < 4){
                            nota = '<i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star-half-o"></i><i class="amarelo-p-text fa fa-star-o"></i>';
                        }else if(listaDeCursos[id].university.score == 4){
                            nota = '<i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star-o"></i>';
                        }else if(listaDeCursos[id].university.score > 4 && listaDeCursos[id].university.score < 5){
                            nota = '<i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star-half-o"></i>';
                        }else{
                            nota = '<i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i><i class="amarelo-p-text fa fa-star"></i>';
                        }

                        var html =  '<img src="'+listaDeCursos[id].university.logo_url+'" alt="logo-anhanguera">'+
                                    '<h6 class="curso-instituicao upper">'+listaDeCursos[id].university.name+'</h6>'+
                                    '<h6 class="curso-nome azul-s-text">'+listaDeCursos[id].course.name+'</h6>'+
                                    '<div class="avaliacoes">'+
                                        '<span class="curso-nota">'+listaDeCursos[id].university.score+'</span>'+
                                        nota+
                                    '</div>'+
                                    '<div class="periodo">'+
                                        '<h6 class="upper">'+listaDeCursos[id].course.kind+'<span></span>'+listaDeCursos[id].course.shift+'</h6>'+
                                        '<p>Início das aulas em: '+listaDeCursos[id].start_date+'</p>'+
                                    '</div>';
                        if(listaDeCursos[id].enabled == true){
                            html += '<div class="mensalidade">'+
                                        '<h6>Mensalidade com o Quero Bolsa:</h6>'+
                                        '<span><strike>R$ '+listaDeCursos[id].full_price.toFixed(2)+'</strike></span>'+
                                        '<h5><b class="verde-text">R$ '+listaDeCursos[id].price_with_discount.toFixed(2)+'</b> /mês</h5>'+
                                    '</div>'+
                                    '<button class="esquerda excluir" data-id="'+id+'">Excluir</button>'+
                                    '<button class="direita active">Ver oferta</button>';
                        }else{
                            html += '<div class="mensalidade">'+
                                        '<h6>Bolsa indisponível.</h6>'+
                                        '<p>Entre em contato com nosso atendimento para saber mais.</p>'+
                                    '</div>'+
                                    '<button class="esquerda excluir" data-id="'+id+'">Excluir</button>'+
                                    '<button class="direita inactive">Indisponível</button>';
                        }
                        item.innerHTML = html;
                        bolsasSelecionadas.appendChild(item);
                    }
                });
            });
        }listaCursos();
    </script>
</body>
</html>